<template name="navbar">
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <a class="navbar-brand" href="/"><img src="logo.png" width="150px" height="50px" alt="versaille-logo"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto mt-2" id="ul-navbar">
                <li class="nav-item js-collapse-after-click active">
                    <a class="nav-link" href="/" >ראשי<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item js-collapse-after-click">
                    <a class="nav-link" href="/catalog">קטלוג</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">אודותינו</a>
                    <div class="dropdown-menu dropdown-menu-right" id="dropdown-menu-navbar">
                        <a class="dropdown-item js-collapse-after-click" href="/aboutus#about">על שעוני ורסאי</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item js-collapse-after-click" href="/aboutus#store-location" id="talkingabouttheshop">חנות המפעל</a>
                        <a class="dropdown-item js-collapse-after-click" href="/aboutus#warranty">אחריות</a>
                    </div>
                </li>
                <script>
                    const $dropdown = $(".dropdown");
                    const $dropdownToggle = $(".dropdown-toggle");
                    const $dropdownMenu = $(".dropdown-menu");
                    const showClass = "show";

                    $(window).on("load resize", function () {
                        if (this.matchMedia("(min-width: 768px)").matches) {
                            $dropdown.hover(
                                    function () {
                                        const $this = $(this);
                                        $this.addClass(showClass);
                                        $this.find($dropdownToggle).attr("aria-expanded", "true");
                                        $this.find($dropdownMenu).addClass(showClass);
                                    },
                                    function () {
                                        const $this = $(this);
                                        $this.removeClass(showClass);
                                        $this.find($dropdownToggle).attr("aria-expanded", "false");
                                        $this.find($dropdownMenu).removeClass(showClass);
                                    }
                            );
                        } else {
                            $dropdown.off("mouseenter mouseleave");
                        }
                    });
                </script>
                <li class="nav-item">
                    <a class="nav-link js-collapse-after-click" href="/">צרו קשר</a>
                </li>
                {{#if currentUser}}
                    <li class="nav-item">
                        <a class="nav-link js-collapse-after-click" href="#">{{> loginButtons }}</a>
                    </li>
                {{/if}}

                <form id="search-form-navbar" class="js-search-item">
                    <div class="form-group">
                        {{> EasySearch.Input index=imagesIndex attributes=inputAttributes}}
                    </div>
                </form>

            </ul>
        </div>
    </nav>
</template>
